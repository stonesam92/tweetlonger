hook -[TweetieWebViewController setRootURL:], set a static variable to notify TweetieOpenURL_replaceTop () that it shouldnt open a new view

then in TweetieOpenURL_replaceTop () check if the variable is set, if yes, de-set it and then return; if not, call original function

else; hook -[UIWebViewWebViewDelegate webView:decidePolicyForNavigationAction:request:frame:decisionListener:]
at least log it


parameters seem to be in registers starting at $r2 (assuming self etc are in the first registers)

#0  0x00085b7c in -[TweetieWebViewController setRootURL:] ()	//
#1  0x0005d6bc in TweetieOpenURL_replaceTop () 	//will make new view if not 		//												//prevented
#2  0x0005d80a in TweetieOpenURL ()
#3  0x0003a39c in -[TweetieTweetViewController webView:shouldStartLoadWithRequest:navigationType:] () //perhaps important too
#4  0x302eee34 in -[UIWebView webView:decidePolicyForNavigationAction:request:frame:decisionListener:] ()
#5  0x302ee054 in -[UIWebViewWebViewDelegate webView:decidePolicyForNavigationAction:request:frame:decisionListener:] () 
										//this is a possible spot to hook without getting involved in messy C functions; need to logify this
#6  0x31789074 in __invoking___ ()
#7  0x3171c70c in -[NSInvocation invoke] ()

setRootURL is the last chance to hook before a new view gets loaded, [UIWebViewWebViewDelegate webView:decidePolicyForNavigationAction:request:frame:decisionListener:] is the first

i think the ACTUAL URL is a t.co url since twitter automatically makes it so when someone posts a link. perhaps in an earlier-stage method you, the long url is passed so that the program can decide what to do based on the url, else i'll just need to go with the t.co and check where redirects go

last resort is to hook TweetieOpenURL() but this is undesirable as i can't see it's arguments etc, much more messy than pure (or mostly pure) obj-c. can get an idea of arguments by printing the objects in the registers, but stil far from pretty.

need to find out what TweetieOpenURL_replaceTop calls to open new view; can't hook the function as i first hoped because it is the thing that calls setRootURL anyway so by the time the variable will have been set, TweetieOpenURL_replaceTop will already be runnign the original function

















IM TOO TIRED FOR THIS SHIT

hooking [TwitterStatus displayText] may be a bit helpful cos it gives us an idea of whats wanting the status's text, then we can backtrace to find out what to hook, perhaps

or break elsewhere so you can see the last viewed status, then store a pointer to it in a static global?

pretty sure this is the real shit -[TweetieTweetViewController setStatus:animated:direction:]

k, its not :/. this may be though -[TweetieStatusListViewController _navigateToStatus:animated:]

it is. make some static id's for the controller, the tweet and the other args (maybe). hook the set status method and set all those statics, then call the method on the static controller pointer when the time comes. then profit!

crashes when you dealloc the UserRecentsblablabla, but not if it gets dealloc'd at the correct time, only when you do it artificially. must do some thigns in it's dealloc that talk to objects that have already been dealloc'd at the 'proper time' hence the segfault. maybe just don't allow the USerRecentsControllers to be held statically, add that as an if clause when you go to set the static variables

4 types of tweetviewcontroller: for search, replychains, users, and timeline

timeline- can be dealloc'd whenever you want; they're safe to play with
replychains - also appear to be safe
search results - safe too
user timeline - seem to be the only dangerous one that can be dealloc'd later than the original code


//----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------


hook (TwitterEntitySet)entities and (NSArray)displayTextRanges to find out what they return

known issues:
crashes when you send release message to tweetieUserRecentsViewController, is a persistent object that shouldn't be dealloc'd?

also the tweet's height gets fucked after you display a tl link; when you go back to the timeline view it retains its longer height

handle the whole entities/displayTextRanges to stop the links begin pasted into the status

parsing issues: eg. replace '<br/>' with '\n', handle usernames and links

possibly control the entities/displayTextRanges to show clickable links/usernames

//-----------------------------------------------------------------------------------------
the four things to parse are:

newlines -- 	




























return [[NSArray alloc] init] twice on -[TwitterStatus displayTextRanges] to kill all entities